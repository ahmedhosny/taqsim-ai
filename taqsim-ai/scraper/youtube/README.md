# Taqsim Video Collection

This guide explains how to use the `find_taqsim_videos.py` script to collect new oud taqsim videos for the Taqsim AI dataset.

## Prerequisites

Before running the script, you'll need:

1. Python 3.6 or higher
2. The Google API client library: `pip install google-api-python-client`
3. A YouTube Data API key (see instructions below)

## Getting a YouTube Data API Key

1. Go to the [Google Cloud Console](https://console.cloud.google.com/)
2. Create a new project or select an existing one
3. Navigate to "APIs & Services" > "Library"
4. Search for "YouTube Data API v3" and enable it
5. Go to "APIs & Services" > "Credentials"
6. Click "Create Credentials" > "API Key"
7. Copy your API key for use with the script

## Running the Script

The script searches YouTube for oud taqsim videos and saves the results in a CSV file with the same format as `taqsim_ai.csv`. It filters videos based on specific criteria:

- Title contains "taqsim", "taksim", "تقاسيم", "تقسيم", or similar terms
- Optionally contains maqam name in title
- Only contains oud (instrumental, no other instruments or crowd noise)

Basic usage:

```bash
python find_taqsim_videos.py --api-key YOUR_API_KEY --output new_taqsim_videos.csv --limit 200
```

### Command Line Arguments

- `--api-key` (required): Your YouTube Data API key
- `--output`: Path where the output CSV file will be saved (default: `new_taqsim_videos.csv`)
- `--limit`: Maximum number of videos to find (default: 500)
- `--existing`: Path to existing taqsim_ai.csv file (default: `../../data/taqsim_ai.csv`)
- `--min-duration`: Minimum video duration in seconds (default: 60)

## Output Format

The script generates a CSV file with the following columns:

- `notes`: Empty field for adding your own notes
- `uuid`: Randomly generated UUID for each video
- `link`: YouTube URL for the video
- `song_name`: Title of the video
- `artist`: Artist name extracted from the title (or "Other" if not recognized)
- `maqam`: Maqam name extracted from the title (or "Unknown" if not recognized)
- `type`: Cultural style (Arabic, Turkish, etc.) determined from the title
- `electric`: "yes" if the title suggests an electric oud is used, otherwise "no"
- `vintage`: "yes" if the title suggests it's a vintage recording, otherwise "no"

## Post-Processing

After running the script, you may want to:

1. Manually review the CSV file to verify the accuracy of the extracted information
2. Update any incorrect or missing information (especially maqam and artist names)
3. Remove any videos that don't meet your criteria (e.g., not solo oud, contains other instruments, etc.)
4. Merge the new videos with your existing dataset

## Example

```bash
# Find 100 new taqsim videos at least 2 minutes long
python find_taqsim_videos.py --api-key YOUR_API_KEY --output new_videos.csv --limit 100 --min-duration 120 --existing /path/to/taqsim_ai.csv

# Review and clean up the results
# Then merge with your existing dataset
cat new_videos.csv >> /path/to/taqsim_ai.csv
```

## Integration with Taqsim AI

The CSV file generated by this script is fully compatible with the Taqsim AI embedding visualizer. The new videos will appear in the filtering options (by artist, song, and maqam) once you've:

1. Downloaded the audio from these videos
2. Processed them through the embedding extraction pipeline
3. Added the new embeddings to your dataset

## Limitations

- The script relies on video titles and descriptions to determine attributes like maqam and artist
- Manual verification is recommended to ensure accuracy
- YouTube API has daily quota limits (typically 10,000 units per day, with each search request costing 100 units)
